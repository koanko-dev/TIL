# Django 가상환경
파이썬 lib에는 무수히 많은 패키지가 설치되어 있습니다. (pip install 해서 설치한 파이썬 패키지들)  
프로젝트를 하다보면 각각의 프로젝트에서 사용하는 특정한 패키지가 있을 것입니다.  
a 라는 프로젝트가 있으면 전역에 설치한 패키지를 사용하는 대신, 해당 프로젝트 안에 필요한 패키지를 설치하는 것이 관리하기도 좋고 명확합니다.  
a, b 라는 프로젝트가 각각 있다면, 같은 패키지라도 각각 따로 설치하는 것이 좋습니다. 독립적으로 의존성을 관리하는 방법이기 때문입니다.  

이렇게 프로젝트별로 독립적인 환경을 구축하게 할 수 있는데, 파이썬에서는 venv(virtual env.) 라고 부릅니다.  
(단어의 차이이긴 하지만) 가상이라기보단, 독립된 환경을 구축해주는 것이라고 이해하는 것이 더 잘 와닿습니다.  

<br>
<br>

## 독립 가상 환경을 구축하기 위한 방법
### 가상환경 생성
가상환경을 생성하려면, 아래와 같은 명령어를 입력해야 합니다.  
명령어를 입력하면 현재 있는 위치에 가상환경 폴더가 생성됩니다. 일반적으로 가상환경 폴더 이름은 venv로 짓습니다.  
```bash
# venv 생성 명령어
python -m venv <가상환경폴더이름>
python -m venv venv
```

환경을 삭제하려면 가상환경 폴더를 삭제하면 끝입니다.  
폴더를 삭제하는 아래의 명령어를 사용할 수 있습니다.  
```bash
rm -rf <가상환경폴더이름>
```

<br>

### Python 위치 확인
```bash
which python
# python의 위치를 부릅니다. 따라서 이곳 lib에 글로벌로 설치된 패키지가 저장됩니다.
```
기본적으로 파이썬의 위치는 글로벌로 설정되어 있습니다. 따라서 이 위치를 프로젝트 내부의 venv로 이동해야 합니다. 그 다음에 패키지를 설치해야 독립적으로 의존성을 관리할 수 있습니다.  

<br>

### venv 활성화
패키지가 저장될 위치를 프로젝트 내부로 옮기는 방법은 venv를 활성화시키는 것입니다.  
아래의 명령어로 활성화 할 수 있습니다.
```bash
# 해당 디렉토리에서 아래 명령어를 입력합니다. (mac에서만 bin)
source venv/bin/activate
# 활성화를 하면, (venv)가 머리 앞에 붙는 것을 볼 수 있습니다.
```
멀리 있는 파이썬이 아닌 내 가상환경에 있는 파이썬을 활성화시키는 명령어입니다.  
활성화되어 있는 동안은 패키지를 설치하면 venv/lib/에 패키지가 설치될 겁니다.  
추가로, 모든 파일이 git에 의해 관리되기 원하는 게 아니라면 .gitignore에 잊지말고 `venv/`를 추가해줘야 합니다.  

비활성화는 아래의 간단한 명령어로 가능합니다.
```bash
deactivate
# venv 비활성화. 머리 앞의 (venv)가 사라집니다.
```

<br>

### 버전 정보 저장
venv를 활성화시킨 채 패키지를 설치하면 프로젝트 내부에 패키지가 설치됩니다.  
프로젝트에서 사용하는 패키지의 버전을 관리하기 위해, 패키지의 버전을 담은 requirements.txt 파일을 만들 수 있습니다.  
requirements.txt 파일은 JavaScript에서 모듈을 관리할 때 사용하는 package.json 파일과 유사하다고 생각하면 됩니다.  
크게 다른 점은, requirements.txt는 패키지를 새로 설치할 때마다 버전을 캡쳐하여 다시 생성해야 한다는 것입니다. 당연하게도 캡쳐하여 만든, 텍스트파일로 된 버전은 스스로 기록되지 않습니다.  
이 파일 이름은 requirements.txt로 하는 것이 컨벤션입니다.
```bash
pip freeze
# 패키지들의 버전 정보가 나옵니다.
pip freeze > requirements.txt
# 이 버전 정보를 requirements.txt에 저장하여 버전을 보관합니다.
```

<br>

### requirements.txt 사용
프로젝트를 클론 받아서 작업하거나 할 때, 저장된 패키지의 정보가 담긴 requirements.txt를 사용해 해당 프로젝트에 맞는 버전의 패키지를 다시 설치하고 작업하면 됩니다.  
JavaScript 프로젝트에서, npm install 명령어를 입력하면 package.json을 읽어 패키지를 설치하는 것과 같다고 생각하면 됩니다.  
```bash
pip install -r requirements.txt
```

<br>
